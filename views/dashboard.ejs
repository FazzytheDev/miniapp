<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <% if (telegramId) { %>
        <h1>Welcome, <%= user.first_name %> <%= user.last_name %></h1>
        <p>Your Telegram ID is <%= telegramId %></p>
        <!-- Display dashboard content here -->
        <div>
            <h2>Your Dashboard</h2>
            <p>Here are your personalized options:</p>
            <!-- Add dashboard components -->
        </div>
    <% } else { %>
        <h1>Loading...</h1>
        <script type="text/javascript">
            Telegram.WebApp.onEvent('init', function() {
                const initData = Telegram.WebApp.initData;
                const url = `https://miniapp-ahcy.onrender.com/verify?init_data=${encodeURIComponent(initData)}`;
                
                window.location.href = url;
            });

            // Optionally, you can initialize the Telegram Web App and set up more event listeners
            Telegram.WebApp.init();
        </script>
    <% } %>
</body>
</html>
